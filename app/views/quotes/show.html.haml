%h3
  = @quote.description
  = link_to 'edit', edit_quote_path(@quote)
  = link_to '+s', new_section_path(parent: @quote)
%table#quotes-table.bordered-table
  %thead
    %tr
      %th Description
      %th Min hours
      %th Max hours
      %th
      %th
  - @quote.descendants.each do |child|
    - if child.type == 'Section'
      %tr.section
        %td{ class: "level_#{child.level}" }
          = child.description
          = link_to '+s', new_section_path(parent: child)
          = link_to '+i', new_item_path(parent: child)
        %td= child.min_hours
        %td= child.max_hours
        %td= link_to 'edit', edit_section_path(child)
        %td= button_to 'destroy', section_path(child), method: :delete, class: 'btn'
    - else
      %tr.item
        %td{ class: "level_#{child.level}" }= child.description
        %td= child.min_hours
        %td= child.max_hours
        %td= link_to 'edit', edit_item_path(child)
        %td= button_to 'destroy', item_path(child), method: :delete, class: 'btn'
  %tfoot
    %tr
      %td= "Totals"
      %td= @quote.min_hours
      %td= @quote.max_hours
      %td
      %td
